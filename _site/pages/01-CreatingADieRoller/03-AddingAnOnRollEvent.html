<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Chapter 3: An OnRoll Event - Captain Coder's Adventure Quest</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Chapter 3: An OnRoll Event | Captain Coder’s Adventure Quest</title> <meta name="generator" content="Jekyll v4.3.0" /> <meta property="og:title" content="Chapter 3: An OnRoll Event" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A Unity Project" /> <meta property="og:description" content="A Unity Project" /> <link rel="canonical" href="http://localhost:4000/pages/01-CreatingADieRoller/03-AddingAnOnRollEvent.html" /> <meta property="og:url" content="http://localhost:4000/pages/01-CreatingADieRoller/03-AddingAnOnRollEvent.html" /> <meta property="og:site_name" content="Captain Coder’s Adventure Quest" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Chapter 3: An OnRoll Event" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"A Unity Project","headline":"Chapter 3: An OnRoll Event","url":"http://localhost:4000/pages/01-CreatingADieRoller/03-AddingAnOnRollEvent.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> Captain Coder's Adventure Quest </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/pages/00-Setup.html" class="nav-list-link">Chapter 0: Setup</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander" aria-label="toggle links in Part 1: Creating a Die Roller category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/pages/01-CreatingADieRoller/00-Part1-ModelingADie.html" class="nav-list-link">Part 1: Creating a Die Roller</a><ul class="nav-list "><li class="nav-list-item "><a href="/pages/01-CreatingADieRoller/01-ModelingADie.html" class="nav-list-link">Chapter 1: Modeling a Die</a></li><li class="nav-list-item "><a href="/pages/01-CreatingADieRoller/02-CreatingADieRollerScene.html" class="nav-list-link">Chapter 2: Die Roller Scene</a></li><li class="nav-list-item active"><a href="/pages/01-CreatingADieRoller/03-AddingAnOnRollEvent.html" class="nav-list-link active">Chapter 3: An OnRoll Event</a></li><li class="nav-list-item "><a href="/pages/01-CreatingADieRoller/04-CreatingADieButtonPrefab.html" class="nav-list-link">Chapter 4: Die Button Prefab</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Captain Coder's Adventure Quest" aria-label="Search Captain Coder's Adventure Quest" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/pages/01-CreatingADieRoller/00-Part1-ModelingADie.html">Part 1: Creating a Die Roller</a></li> <li class="breadcrumb-nav-list-item"><span>Chapter 3: An OnRoll Event</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="chapter-3-adding-an-onroll-event"> <a href="#chapter-3-adding-an-onroll-event" class="anchor-heading" aria-labelledby="chapter-3-adding-an-onroll-event"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Chapter 3: Adding an OnRoll Event </h1> <p>In this part, you will learn how to add <code class="language-plaintext highlighter-rouge">UnityEvent</code>s to your scripts and update elements on the screen when a <code class="language-plaintext highlighter-rouge">Die</code> is rolled.</p> <p>Before starting, you should have finished the challenge at the end of <a href="../02-DieRoller/README.md">Part 2 - Creating a Die Roller Scene</a> and have a scene that contains 6 <code class="language-plaintext highlighter-rouge">Die Controller</code>s as well as 6 buttons that can roll each <code class="language-plaintext highlighter-rouge">Die</code>.</p> <p><img src="../imgs/02-DieRollerScene/21-FinishedChallenge.png" alt="Finished Challenge" /></p> <details open=""> <summary class="text-delta"> Table of contents </summary> <ol id="markdown-toc"> <li><a href="#00-organize-your-hierarchy" id="markdown-toc-00-organize-your-hierarchy">00. Organize Your Hierarchy</a></li> <li><a href="#01-adding-a-text-component" id="markdown-toc-01-adding-a-text-component">01. Adding a Text Component</a></li> <li><a href="#challenge-center-title-at-the-top-of-the-screen" id="markdown-toc-challenge-center-title-at-the-top-of-the-screen">Challenge: Center Title at the Top of the Screen</a></li> <li><a href="#02-add-a-result-label-to-a-die-button" id="markdown-toc-02-add-a-result-label-to-a-die-button">02. Add a Result Label to a Die Button</a></li> <li><a href="#03-adding-an-onroll-listener-to-diecontroller" id="markdown-toc-03-adding-an-onroll-listener-to-diecontroller">03. Adding an OnRoll listener to DieController</a></li> <li><a href="#challenge-add-die-labels-to-all-buttons" id="markdown-toc-challenge-add-die-labels-to-all-buttons">Challenge: Add Die Labels to All Buttons</a></li> <li><a href="#good-time-to-commit" id="markdown-toc-good-time-to-commit">Good Time to Commit</a></li> <li><a href="#whats-next" id="markdown-toc-whats-next">What’s Next?</a></li> </ol> </details> <h1 id="00-organize-your-hierarchy"> <a href="#00-organize-your-hierarchy" class="anchor-heading" aria-labelledby="00-organize-your-hierarchy"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 00. Organize Your Hierarchy </h1> <p>After completing the challenge for part 2, my <code class="language-plaintext highlighter-rouge">Hierarchy</code> looks like this:</p> <p><img src="../imgs/02-DieRollerScene/22-Hierarchy-Organization.png" alt="My Hierarchy" /></p> <p>It is okay if your <code class="language-plaintext highlighter-rouge">Hierarchy</code> structure is different. However, throughout this section, I refer to the <code class="language-plaintext highlighter-rouge">Hierarchy</code> as if it has the structure above.</p> <h1 id="01-adding-a-text-component"> <a href="#01-adding-a-text-component" class="anchor-heading" aria-labelledby="01-adding-a-text-component"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 01. Adding a Text Component </h1> <p>We would like to have the result of the die being rolled to be displayed above the button that was clicked. To do this, we will add a text component to the screen.</p> <p>For practice, let’s start by adding a “title” to the scene that says “Die Roller!”</p> <ol> <li>Right click on the <code class="language-plaintext highlighter-rouge">Canvas</code> in your <code class="language-plaintext highlighter-rouge">Hierarchy</code></li> <li>Select <code class="language-plaintext highlighter-rouge">UI</code> &gt; <code class="language-plaintext highlighter-rouge">Text - TextMeshPro</code></li> <li>Rename the element to be called <code class="language-plaintext highlighter-rouge">Title</code></li> </ol> <p><img src="../imgs/03-AddingAnOnRoll/00-AddTitle.gif" alt="Add Title" /></p> <p>This is the same type of element as the text on the button’s you’ve added previously.</p> <h1 id="challenge-center-title-at-the-top-of-the-screen"> <a href="#challenge-center-title-at-the-top-of-the-screen" class="anchor-heading" aria-labelledby="challenge-center-title-at-the-top-of-the-screen"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Challenge: Center Title at the Top of the Screen </h1> <ul> <li>Update the <code class="language-plaintext highlighter-rouge">TextMeshPro - Text</code> component on <code class="language-plaintext highlighter-rouge">Title</code> <ul> <li>Change the title to “Die Roller!”</li> <li>Update the font to be a size you find reasonable</li> </ul> </li> <li>Update the <code class="language-plaintext highlighter-rouge">Rect Transform</code> component on <code class="language-plaintext highlighter-rouge">Title</code> <ul> <li>Update the anchors and pivot to center it at the top of the screen</li> <li>Update the width and height appropriately.</li> </ul> </li> </ul> <p>When you’re finished, your scene should look similar to this:</p> <p><img src="../imgs/03-AddingAnOnRoll/01-Center%20Title%20Practice.png" alt="Center Title" /></p> <h1 id="02-add-a-result-label-to-a-die-button"> <a href="#02-add-a-result-label-to-a-die-button" class="anchor-heading" aria-labelledby="02-add-a-result-label-to-a-die-button"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 02. Add a Result Label to a Die Button </h1> <p>Now that we have a little bit of practice with adding a text component to the UI. Let’s try adding a text component above the <code class="language-plaintext highlighter-rouge">d4</code> button.</p> <ol> <li>Right click on the <code class="language-plaintext highlighter-rouge">d4</code> button in the <code class="language-plaintext highlighter-rouge">Hierarchy</code></li> <li>Select <code class="language-plaintext highlighter-rouge">Create Empty Parent</code></li> <li>Rename the new <code class="language-plaintext highlighter-rouge">GameObject</code> to be <code class="language-plaintext highlighter-rouge">d4 Group</code></li> </ol> <p><img src="../imgs/03-AddingAnOnRoll/02-d4Group.gif" alt="Create d4 Group" /></p> <p>By doing this, we have “pushed” the <code class="language-plaintext highlighter-rouge">d4</code> button inside of a new <code class="language-plaintext highlighter-rouge">GameObject</code> called <code class="language-plaintext highlighter-rouge">d4 Group</code>. This may have caused the <code class="language-plaintext highlighter-rouge">d4</code> button to adjust its positioning within the <code class="language-plaintext highlighter-rouge">d4 Group</code> as it is no longer being controlled by the <code class="language-plaintext highlighter-rouge">Horizontal Layout Group</code> of its previous parent (<code class="language-plaintext highlighter-rouge">Dice</code>).</p> <p>By default, when you create a parent object surrounding others, it will set its <code class="language-plaintext highlighter-rouge">Rect Transform</code> to encompass all of the inner object. However, the <code class="language-plaintext highlighter-rouge">d4</code> within didn’t update its anchors / position appropriately. One fix would be to set the anchors / pivot of <code class="language-plaintext highlighter-rouge">d4</code> to center in the parent. However, because we want to add a Text label within, we will instead add a <code class="language-plaintext highlighter-rouge">Vertical Layout Group</code> to <code class="language-plaintext highlighter-rouge">d4 Group</code> which will update the children appropriately.</p> <ol> <li>Select <code class="language-plaintext highlighter-rouge">d4 Group</code> from the <code class="language-plaintext highlighter-rouge">Hierarchy</code></li> <li>In the <code class="language-plaintext highlighter-rouge">Inspector</code> select <code class="language-plaintext highlighter-rouge">Add Component</code></li> <li>Search for <code class="language-plaintext highlighter-rouge">Vertical Layout Group</code></li> <li>Add the component</li> </ol> <p><img src="../imgs/03-AddingAnOnRoll/03-AddVerticalLayout.gif" alt="Add Vertical Layout Group" /></p> <p>After doing this, the button should “snap” back into place within the <code class="language-plaintext highlighter-rouge">d4 Group</code>. If it doesn’t you may need to adjust the size of the <code class="language-plaintext highlighter-rouge">d4 Group</code> to have a width and height that are at least as big as the <code class="language-plaintext highlighter-rouge">d4</code> button.</p> <p>Finally, let’s add a text component to the <code class="language-plaintext highlighter-rouge">d4 Group</code></p> <ol> <li>Right click on the <code class="language-plaintext highlighter-rouge">d4 Group</code></li> <li>Select <code class="language-plaintext highlighter-rouge">UI</code> &gt; <code class="language-plaintext highlighter-rouge">Text - TextMeshPro</code></li> <li>Rename the component <code class="language-plaintext highlighter-rouge">Label</code></li> </ol> <p><img src="../imgs/03-AddingAnOnRoll/04-AddLabel.gif" alt="Add Label" /></p> <p>In my scene, the text is very small and is disappearing off the bottom of the scene. I would like the text to be a little bigger and centered above the button.</p> <ol> <li>Move the <code class="language-plaintext highlighter-rouge">Label</code> above the <code class="language-plaintext highlighter-rouge">d4</code> in the <code class="language-plaintext highlighter-rouge">d4 Group</code></li> </ol> <p><img src="../imgs/03-AddingAnOnRoll/05-AdjustLabelOrder.gif" alt="Adjust Label Order" /></p> <p>This will change the order they are added to the <code class="language-plaintext highlighter-rouge">Vertical Group</code></p> <ol> <li>Select the <code class="language-plaintext highlighter-rouge">Label</code> in the <code class="language-plaintext highlighter-rouge">Hierarchy</code></li> <li>Find the <code class="language-plaintext highlighter-rouge">TextMeshPro</code> component in the <code class="language-plaintext highlighter-rouge">Inspector</code></li> <li>Update the text to “1”</li> <li>Update the font size to look “nice” (I’ve chosen 64) <ul> <li>You may need to update the <code class="language-plaintext highlighter-rouge">Height</code> of the <code class="language-plaintext highlighter-rouge">Rect Transform</code> to match.</li> </ul> </li> <li>Update the <code class="language-plaintext highlighter-rouge">Alignment</code> to <code class="language-plaintext highlighter-rouge">Center</code></li> </ol> <p><img src="../imgs/03-AddingAnOnRoll/06-CenterLabel.gif" alt="Center Label" /></p> <p>Lastly, let’s update the spacing and alignment of the <code class="language-plaintext highlighter-rouge">Vertical Layout Group</code> to make the children look a little nicer:</p> <ol> <li>Select <code class="language-plaintext highlighter-rouge">d4 Group</code> in the <code class="language-plaintext highlighter-rouge">Hierarchy</code></li> <li>Find the <code class="language-plaintext highlighter-rouge">Vertical Layout Group</code> in the <code class="language-plaintext highlighter-rouge">Inspector</code></li> <li>Adjust the spacing and alignment until you like the way it looks. <ul> <li>The image below shows the settings I chose:</li> </ul> </li> </ol> <p><img src="../imgs/03-AddingAnOnRoll/06-MyVLGSettings.png" alt="My VLG Settings" /></p> <p>After making these changes, my <code class="language-plaintext highlighter-rouge">d4 Group</code> was too big to fit inside the <code class="language-plaintext highlighter-rouge">Dice</code> parent which caused it to go off the bottom of the scene again:</p> <p><img src="../imgs/03-AddingAnOnRoll/07-OffTheScreen.png" alt="Off the Screen" /></p> <p>To fix this, you may need to update the height of the <code class="language-plaintext highlighter-rouge">Dice</code> parent to match the height of the <code class="language-plaintext highlighter-rouge">d4 Group</code>.</p> <p>Here is what the Scene looks like at this point:</p> <p><img src="../imgs/03-AddingAnOnRoll/08-FinishedLabel.png" alt="Scene with Label" /></p> <h1 id="03-adding-an-onroll-listener-to-diecontroller"> <a href="#03-adding-an-onroll-listener-to-diecontroller" class="anchor-heading" aria-labelledby="03-adding-an-onroll-listener-to-diecontroller"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 03. Adding an OnRoll listener to DieController </h1> <p>Next, we would like to be able to update the text of the button any time the <code class="language-plaintext highlighter-rouge">d4 Controller</code> rolls. To do this, we are going to add a <code class="language-plaintext highlighter-rouge">UnityEvent</code> to the <code class="language-plaintext highlighter-rouge">DieController</code> class. To use <code class="language-plaintext highlighter-rouge">UnityEvent</code>s we need to use the <code class="language-plaintext highlighter-rouge">UnityEngine.Events</code> name space.</p> <ol> <li>Update the <code class="language-plaintext highlighter-rouge">DieController.cs</code> file to use the <code class="language-plaintext highlighter-rouge">UnityEngine.Events</code> name space.</li> </ol> <div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine.Events</span><span class="p">;</span> <span class="c1">// &lt;-- Required to use UnityEvents</span>

<span class="k">namespace</span> <span class="nn">AdventureQuest.Dice</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">DieController</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span> <span class="c1">// omitted for brevity }</span>
<span class="p">}</span>
</code></pre></div></div> <ol> <li>Update the <code class="language-plaintext highlighter-rouge">DieController</code> class to have a <code class="language-plaintext highlighter-rouge">UnityEvent&lt;int&gt;</code> property named <code class="language-plaintext highlighter-rouge">OnRoll</code>.</li> <li><code class="language-plaintext highlighter-rouge">OnRoll</code> should be <code class="language-plaintext highlighter-rouge">public</code> with a <code class="language-plaintext highlighter-rouge">get</code> and <code class="language-plaintext highlighter-rouge">private set</code></li> </ol> <div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">DieController</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">UnityEvent</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">OnRoll</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">private</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="p">[</span><span class="n">field</span><span class="p">:</span> <span class="n">SerializeField</span><span class="p">]</span>
    <span class="k">public</span> <span class="kt">int</span> <span class="n">Sides</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">private</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="m">6</span><span class="p">;</span>
    <span class="c1">// omitted for brevity</span>
<span class="p">}</span>
</code></pre></div></div> <ol> <li>To access it from the <code class="language-plaintext highlighter-rouge">Inspector</code> add a <code class="language-plaintext highlighter-rouge">[field: SerializeField]</code> attribute.</li> </ol> <div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="n">field</span><span class="p">:</span> <span class="n">SerializeField</span><span class="p">]</span>
<span class="k">public</span> <span class="n">UnityEvent</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">OnRollString</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">private</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</code></pre></div></div> <p>A <code class="language-plaintext highlighter-rouge">UnityEvent</code> allows other elements of the game to “listen” for events to occur. When we specify <code class="language-plaintext highlighter-rouge">UnityEvent&lt;string&gt;</code> we are creating an event that will produce an <code class="language-plaintext highlighter-rouge">string</code>. In this case, that <code class="language-plaintext highlighter-rouge">string</code> will be the value that was rolled. Thus, any object listening will not only know that the die was rolled BUT also what the result was.</p> <p>To trigger the event, we need to add it to the <code class="language-plaintext highlighter-rouge">Roll()</code> method.</p> <ol> <li>Update the <code class="language-plaintext highlighter-rouge">Roll()</code> method to call <code class="language-plaintext highlighter-rouge">OnRoll.Invoke(_die.LastRolled.ToString())</code></li> </ol> <div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">void</span> <span class="nf">Roll</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">_die</span><span class="p">.</span><span class="nf">Roll</span><span class="p">();</span>
    <span class="n">OnRollString</span><span class="p">.</span><span class="nf">Invoke</span><span class="p">(</span><span class="n">_die</span><span class="p">.</span><span class="n">LastRolled</span><span class="p">.</span><span class="nf">ToString</span><span class="p">());</span>
<span class="p">}</span>
</code></pre></div></div> <p>This line of code converts the <code class="language-plaintext highlighter-rouge">_die.LastRolled</code> value to a string and then sends the resulting string to all of the “listeners” of the <code class="language-plaintext highlighter-rouge">OnRollString</code> event.</p> <p>If all went well, you should be able to find the <code class="language-plaintext highlighter-rouge">OnRollString</code> event in the <code class="language-plaintext highlighter-rouge">Inspector</code>.</p> <ol> <li>Select <code class="language-plaintext highlighter-rouge">d4 Controller</code> from the <code class="language-plaintext highlighter-rouge">Hierarchy</code></li> <li>Find the <code class="language-plaintext highlighter-rouge">DieController</code> component</li> </ol> <p><img src="../imgs/03-AddingAnOnRoll/09-OnRollString.png" alt="On Roll String" /></p> <p>Let’s add the <code class="language-plaintext highlighter-rouge">d4 Group</code>’s <code class="language-plaintext highlighter-rouge">Label</code> as a listener:</p> <ol> <li>Click the <code class="language-plaintext highlighter-rouge">+</code> icon on the <code class="language-plaintext highlighter-rouge">OnRollString</code> event.</li> <li>Drag the <code class="language-plaintext highlighter-rouge">Label</code> into the <code class="language-plaintext highlighter-rouge">None (Object)</code> slot</li> </ol> <p><img src="../imgs/03-AddingAnOnRoll/09-AddListener.gif" alt="Add Listener" /></p> <p>Lastly, we need to set the function to set the <code class="language-plaintext highlighter-rouge">text</code> to match the result.</p> <ol> <li>Click the function drop down menu</li> <li>Select <code class="language-plaintext highlighter-rouge">TextMeshProUGUI</code> &gt; <code class="language-plaintext highlighter-rouge">text</code> <ul> <li>Be sure to select the <code class="language-plaintext highlighter-rouge">text</code> option that is listed toward the top under the <code class="language-plaintext highlighter-rouge">Dynamic string</code> section.</li> </ul> </li> </ol> <p><img src="../imgs/03-AddingAnOnRoll/10-SetText.gif" alt="Add Text" /></p> <p>When the <code class="language-plaintext highlighter-rouge">OnRollString</code> event is invoked, it will send the <code class="language-plaintext highlighter-rouge">string</code> to the <code class="language-plaintext highlighter-rouge">Label</code> which then uses that <code class="language-plaintext highlighter-rouge">string</code> to update its <code class="language-plaintext highlighter-rouge">text</code> property.</p> <h2 class="no_toc" id="test-it-out"> <a href="#test-it-out" class="anchor-heading" aria-labelledby="test-it-out"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Test it Out </h2> <p>If all went well, you should now be able to run your program, click the <code class="language-plaintext highlighter-rouge">d4</code> button and see the text update. Give it a try!</p> <p><img src="../imgs/03-AddingAnOnRoll/11-TestIt.gif" alt="Try it" /></p> <h1 id="challenge-add-die-labels-to-all-buttons"> <a href="#challenge-add-die-labels-to-all-buttons" class="anchor-heading" aria-labelledby="challenge-add-die-labels-to-all-buttons"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Challenge: Add Die Labels to All Buttons </h1> <p>Can you update your scene such that each die button has a label that updates when it is clicked?</p> <p>When you’re done, your scene should look and act similar to this:</p> <p><img src="../imgs/03-AddingAnOnRoll/12-FinishedChallenge.gif" alt="Finished Die Roller" /></p> <h1 id="good-time-to-commit"> <a href="#good-time-to-commit" class="anchor-heading" aria-labelledby="good-time-to-commit"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Good Time to Commit </h1> <p>Now would be a good time to make a <code class="language-plaintext highlighter-rouge">git</code> commit. You just finished a feature. More specifically, you just added a <code class="language-plaintext highlighter-rouge">OnRollString</code> event to the <code class="language-plaintext highlighter-rouge">DieController</code>. Before committing, be sure you save your <code class="language-plaintext highlighter-rouge">Die Roller</code> scene (Unity doesn’t auto save for you).</p> <h1 id="whats-next"> <a href="#whats-next" class="anchor-heading" aria-labelledby="whats-next"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> What’s Next? </h1> <p>If you’ve completed the challenge, you may have felt that “wiring” up all the labels, controllers, and buttons was incredibly tedious. If you decide to make changes to the buttons in the future, it will be painful to update all of them again. In the next section, we will learn how to create a <code class="language-plaintext highlighter-rouge">Prefab</code> for a <code class="language-plaintext highlighter-rouge">Die Button</code> to make it easy to add new buttons and more importantly update old buttons!</p> <p>After you have completed the challenge, you should proceed to <a href="../04-DieButtonPrefab/README.md">Part 4: Creating a Die Button Prefab</a></p> <h2 id="discussion"> <a href="#discussion" class="anchor-heading" aria-labelledby="discussion"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Join the Discussion </h2> <p> If you're stuck, have questions, or want to provide feedback, you can do so below. However, I ask that you please refrain from posting complete solutions to any of the challenges. </p> <p> Before commenting, you will need to authorize <b>giscus</b>. Alternatively, you can add a comment directly on the <a href="https://github.com/CaptainCoderOrg/AdventureQuest-Unity-2021/discussions/categories/q-a" target="_blank">GitHub Discussion Board</a>. </p> <script src="https://giscus.app/client.js" data-repo="CaptainCoderOrg/AdventureQuest-Unity-2021" data-repo-id="R_kgDOIsdEkA" data-category="Q&A" data-category-id="DIC_kwDOIsdEkM4CTVa-" data-mapping="title" data-strict="0" data-reactions-enabled="0" data-emit-metadata="0" data-input-position="bottom" data-theme="preferred_color_scheme" data-lang="en" crossorigin="anonymous" async> </script> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
