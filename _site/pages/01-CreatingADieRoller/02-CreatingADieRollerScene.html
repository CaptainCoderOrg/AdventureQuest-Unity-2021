<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Chapter 2: Die Roller Scene - Captain Coder's Adventure Quest</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Chapter 2: Die Roller Scene | Captain Coder’s Adventure Quest</title> <meta name="generator" content="Jekyll v4.3.0" /> <meta property="og:title" content="Chapter 2: Die Roller Scene" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A Unity Project" /> <meta property="og:description" content="A Unity Project" /> <link rel="canonical" href="http://localhost:4000/pages/01-CreatingADieRoller/02-CreatingADieRollerScene.html" /> <meta property="og:url" content="http://localhost:4000/pages/01-CreatingADieRoller/02-CreatingADieRollerScene.html" /> <meta property="og:site_name" content="Captain Coder’s Adventure Quest" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Chapter 2: Die Roller Scene" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"A Unity Project","headline":"Chapter 2: Die Roller Scene","url":"http://localhost:4000/pages/01-CreatingADieRoller/02-CreatingADieRollerScene.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> Captain Coder's Adventure Quest </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/pages/00-Setup.html" class="nav-list-link">Chapter 0: Setup</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander" aria-label="toggle links in Part 1: Creating a Die Roller category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/pages/01-CreatingADieRoller/00-Part1-ModelingADie.html" class="nav-list-link">Part 1: Creating a Die Roller</a><ul class="nav-list "><li class="nav-list-item "><a href="/pages/01-CreatingADieRoller/01-ModelingADie.html" class="nav-list-link">Chapter 1: Modeling a Die</a></li><li class="nav-list-item active"><a href="/pages/01-CreatingADieRoller/02-CreatingADieRollerScene.html" class="nav-list-link active">Chapter 2: Die Roller Scene</a></li><li class="nav-list-item "><a href="/pages/01-CreatingADieRoller/03-AddingAnOnRollEvent.html" class="nav-list-link">Chapter 3: An OnRoll Event</a></li><li class="nav-list-item "><a href="/pages/01-CreatingADieRoller/04-CreatingADieButtonPrefab.html" class="nav-list-link">Chapter 4: Die Button Prefab</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Captain Coder's Adventure Quest" aria-label="Search Captain Coder's Adventure Quest" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/pages/01-CreatingADieRoller/00-Part1-ModelingADie.html">Part 1: Creating a Die Roller</a></li> <li class="breadcrumb-nav-list-item"><span>Chapter 2: Die Roller Scene</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="chapter-2-creating-a-die-roller-scene"> <a href="#chapter-2-creating-a-die-roller-scene" class="anchor-heading" aria-labelledby="chapter-2-creating-a-die-roller-scene"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Chapter 2: Creating a Die Roller Scene </h1> <p>In this part, we will be creating a Scene in Unity that allows us to roll different sided dice. Before starting, be sure you’ve completed <a href="/pages/01-CreatingADieRoller/01-ModelingADie.html">Chapter 1: Modeling a Die</a> and that all of your tests are passing.</p> <details open=""> <summary class="text-delta"> Table of contents </summary> <ol id="markdown-toc"> <li><a href="#01-create-a-scene" id="markdown-toc-01-create-a-scene">01. Create a Scene</a></li> <li><a href="#02-setup-screen-dimensions" id="markdown-toc-02-setup-screen-dimensions">02. Setup Screen Dimensions</a></li> <li><a href="#03-adding-a-button-to-the-scene" id="markdown-toc-03-adding-a-button-to-the-scene">03. Adding a Button to the Scene</a></li> <li><a href="#04-adjusting-the-canvas" id="markdown-toc-04-adjusting-the-canvas">04. Adjusting the Canvas</a></li> <li><a href="#05-positioning-the-button" id="markdown-toc-05-positioning-the-button">05. Positioning the Button</a></li> <li><a href="#06-sizing-the-button" id="markdown-toc-06-sizing-the-button">06. Sizing the Button</a></li> <li><a href="#07-creating-a-diecontroller" id="markdown-toc-07-creating-a-diecontroller">07. Creating a DieController</a></li> <li><a href="#08-adding-a-dicecontroller-to-the-scene" id="markdown-toc-08-adding-a-dicecontroller-to-the-scene">08. Adding a DiceController to the Scene</a></li> <li><a href="#09-rolling-on-button-click" id="markdown-toc-09-rolling-on-button-click">09. Rolling on Button Click</a></li> <li><a href="#10-generalizing-the-diecontroller" id="markdown-toc-10-generalizing-the-diecontroller">10. Generalizing the DieController</a></li> <li><a href="#good-time-to-commit" id="markdown-toc-good-time-to-commit">Good Time to Commit</a></li> <li><a href="#challenge-create-a-set-of-dice" id="markdown-toc-challenge-create-a-set-of-dice">Challenge: Create a Set of Dice</a></li> <li><a href="#whats-next" id="markdown-toc-whats-next">What’s Next?</a></li> </ol> </details> <h1 id="01-create-a-scene"> <a href="#01-create-a-scene" class="anchor-heading" aria-labelledby="01-create-a-scene"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 01. Create a Scene </h1> <p>A <strong>Scene</strong> in Unity is where you work with part of a game or application. In this section, we will create a Die Roller Scene that allows the user to click on buttons to roll dice with varying sides.</p> <ol> <li>Open the <code class="language-plaintext highlighter-rouge">Scenes</code> folder.</li> <li>Right click and select <code class="language-plaintext highlighter-rouge">Create</code> &gt; <code class="language-plaintext highlighter-rouge">Scene</code></li> <li>Rename the Scene to be <code class="language-plaintext highlighter-rouge">Die Roller</code></li> <li>Double click to open the <code class="language-plaintext highlighter-rouge">Die Roller</code> scene.</li> </ol> <p><img src="../imgs/02-DieRollerScene/00-CreateScene.gif" alt="Create Scene" /></p> <ol> <li>Verify that you have the <code class="language-plaintext highlighter-rouge">Die Roller</code> scene open. In the <code class="language-plaintext highlighter-rouge">Hierarchy</code> view, you should see <code class="language-plaintext highlighter-rouge">Die Roller</code> at the very top.</li> </ol> <p><img src="../imgs/02-DieRollerScene/01-EnsureSceneOpen.png" alt="Ensure Scene is Open" /></p> <h1 id="02-setup-screen-dimensions"> <a href="#02-setup-screen-dimensions" class="anchor-heading" aria-labelledby="02-setup-screen-dimensions"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 02. Setup Screen Dimensions </h1> <p>To make our lives a little easier, we will limit our game to use a standard monitor aspect size: <code class="language-plaintext highlighter-rouge">16:9</code>. This is an aspect ratio and it means that for every 16 pixels wide, the screen is 9 pixels tall. This is a common screen resolution and includes HD (1920x1080) and 4K UHD (2840x2160).</p> <p><strong>Note:</strong> By default, Unity selects a <code class="language-plaintext highlighter-rouge">Free Aspect</code> which means it will try to accommodate <em>ANY</em> screen size. As awesome as this might sound, it turns out to be a bit of a challenge to make it work in practice.</p> <ol> <li>Click the <code class="language-plaintext highlighter-rouge">Game</code> Panel</li> <li>Click the <code class="language-plaintext highlighter-rouge">Aspect Drop Down</code> (It probably says Free Aspect)</li> <li>Select <code class="language-plaintext highlighter-rouge">16:9 Aspect</code></li> </ol> <p><img src="../imgs/02-DieRollerScene/02-SetAspect.gif" alt="Set Aspect" /></p> <ol> <li>Finally, return back to the <code class="language-plaintext highlighter-rouge">Scene</code> panel.</li> </ol> <h1 id="03-adding-a-button-to-the-scene"> <a href="#03-adding-a-button-to-the-scene" class="anchor-heading" aria-labelledby="03-adding-a-button-to-the-scene"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 03. Adding a Button to the Scene </h1> <p>Next, let’s add a Button to the scene.</p> <ol> <li>Right click in the hierarchy</li> <li>Select <code class="language-plaintext highlighter-rouge">UI</code> &gt; <code class="language-plaintext highlighter-rouge">Button - TextMeshPro</code></li> </ol> <p><img src="../imgs/02-DieRollerScene/02-Create%20Button.gif" alt="Create Button" /></p> <p>After a moment, you will likely see a massive button appear in the <code class="language-plaintext highlighter-rouge">Scene</code> along with several items in the <code class="language-plaintext highlighter-rouge">Hierarchy</code>: A <code class="language-plaintext highlighter-rouge">Canvas</code>, a <code class="language-plaintext highlighter-rouge">Button</code>, a <code class="language-plaintext highlighter-rouge">Text</code>, and an <code class="language-plaintext highlighter-rouge">EventSystem</code>.</p> <p><img src="../imgs/02-DieRollerScene/03-ButtonInHierarchy.png" alt="Button in Hierarchy" /></p> <p>A <code class="language-plaintext highlighter-rouge">Canvas</code> is Unity’s main way for adding <code class="language-plaintext highlighter-rouge">HUD</code> / <code class="language-plaintext highlighter-rouge">UI</code> elements to the game screen. The <code class="language-plaintext highlighter-rouge">EventSystem</code> is the way <code class="language-plaintext highlighter-rouge">Unity</code> tracks user clicks / interactions with the <code class="language-plaintext highlighter-rouge">Canvas</code>. Finally, the <code class="language-plaintext highlighter-rouge">Button</code> is the actual button on the screen and the <code class="language-plaintext highlighter-rouge">Text</code> is the text that is displayed within the button.</p> <h1 id="04-adjusting-the-canvas"> <a href="#04-adjusting-the-canvas" class="anchor-heading" aria-labelledby="04-adjusting-the-canvas"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 04. Adjusting the Canvas </h1> <p>So… how do we make the button look reasonable?</p> <p>There are a few things happening here. By default, a <code class="language-plaintext highlighter-rouge">Canvas</code> is set up to render over an entire screen rather than onto the scene directly. This is important in 3D games as well as 2D games that go outside of the bounds of what the player sees. What would it mean to have the canvas be in the game world?</p> <p>Instead, the Canvas renders on top of what the player sees. If you were to click to the <code class="language-plaintext highlighter-rouge">Game</code> panel, you would see the Button how it would appear to the user. If you’re lucky, you will see the button somewhere on the screen. However, this will be dependent on the size of the <code class="language-plaintext highlighter-rouge">Game</code> panel itself. If you drag the screen around, you will see the button position on the screen move about.</p> <ol> <li>Open the <code class="language-plaintext highlighter-rouge">Game</code> Panel</li> <li>Resize the window to see the button move</li> </ol> <p><img src="../imgs/02-DieRollerScene/05-ResizeGameView.gif" alt="Resize Game Panel" /></p> <p>What is happening?</p> <p>The default behavior of the canvas is to maintain a <strong>constant</strong> pixel size. This means that, although the aspect is remaining constant, the size of the button and the text will always have the same size. If we select the <code class="language-plaintext highlighter-rouge">Canvas</code> in the <code class="language-plaintext highlighter-rouge">Hierarcy</code>, We can see this in the <code class="language-plaintext highlighter-rouge">Inspector</code> panel under the <code class="language-plaintext highlighter-rouge">Canvas Scaler</code> section.</p> <ol> <li>Click the <code class="language-plaintext highlighter-rouge">Canvas</code> in the <code class="language-plaintext highlighter-rouge">Hierarchy</code></li> <li>Open the <code class="language-plaintext highlighter-rouge">Inspector</code> panel.</li> <li>Find <code class="language-plaintext highlighter-rouge">Canvas Scaler</code> in the <code class="language-plaintext highlighter-rouge">Inspector</code> panel.</li> </ol> <p><img src="../imgs/02-DieRollerScene/06-CanvasScaler.png" alt="Canvas Scaler" /></p> <p>How do we fix it?</p> <p>For this scene, we would like the <code class="language-plaintext highlighter-rouge">Canvas</code> to scale to the size of the screen.</p> <ol> <li>Set <code class="language-plaintext highlighter-rouge">UI Scale Mode</code> to be <code class="language-plaintext highlighter-rouge">Scale With Screen Size</code></li> <li>Set the resolution to be <code class="language-plaintext highlighter-rouge">1920</code> x <code class="language-plaintext highlighter-rouge">1080</code> (this is a 16:9 aspect)</li> </ol> <p><img src="../imgs/02-DieRollerScene/07-SetScaler.png" alt="Set Scaler" /></p> <p>As you do this, you should see the <code class="language-plaintext highlighter-rouge">Button</code> adjust its position on the screen. However, if you resize the <code class="language-plaintext highlighter-rouge">Game</code> panel, the button scales to match the new resolution!</p> <h1 id="05-positioning-the-button"> <a href="#05-positioning-the-button" class="anchor-heading" aria-labelledby="05-positioning-the-button"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 05. Positioning the Button </h1> <p>If you return to the <code class="language-plaintext highlighter-rouge">Scene</code> panel, you will still see that the <code class="language-plaintext highlighter-rouge">Canvas</code> is massive compared to the scene. If you double click the <code class="language-plaintext highlighter-rouge">Canvas</code> in the <code class="language-plaintext highlighter-rouge">Hierarchy</code>, the <code class="language-plaintext highlighter-rouge">Scene</code> view will zoom out and center the <code class="language-plaintext highlighter-rouge">Canvas</code> within the panel. In fact, double clicking on any component in the <code class="language-plaintext highlighter-rouge">Hierarchy</code> will center it in the <code class="language-plaintext highlighter-rouge">Scene</code> panel.</p> <ol> <li>Double click on the <code class="language-plaintext highlighter-rouge">Canvas</code> in the <code class="language-plaintext highlighter-rouge">Hierarchy</code></li> <li>Double click the <code class="language-plaintext highlighter-rouge">Main Camera</code> in the <code class="language-plaintext highlighter-rouge">Hierarchy</code></li> </ol> <p><img src="../imgs/02-DieRollerScene/04-DoubleClickCanvas.gif" alt="Double Click Canvas" /></p> <p>With our <code class="language-plaintext highlighter-rouge">Canvas</code> visible, let’s adjust the button to be at the bottom of the screen with a reasonable size.</p> <ol> <li>Select the <code class="language-plaintext highlighter-rouge">Button</code> in the <code class="language-plaintext highlighter-rouge">Hierarchy</code></li> <li>Find the <code class="language-plaintext highlighter-rouge">Rect Transform</code> component in the <code class="language-plaintext highlighter-rouge">Inspector</code> panel.</li> <li>Click the <strong>Anchors</strong> icon</li> <li>Select <code class="language-plaintext highlighter-rouge">Bottom</code> and <code class="language-plaintext highlighter-rouge">Center</code></li> </ol> <p><img src="../imgs/02-DieRollerScene/07-SetAnchors.gif" alt="Set Anchors" /></p> <p>This updates how the <code class="language-plaintext highlighter-rouge">Pos X</code> and <code class="language-plaintext highlighter-rouge">Pos Y</code> properties are displayed. This makes them relative to the Bottom and Center position on the <code class="language-plaintext highlighter-rouge">Canvas</code></p> <ol> <li>Next, update the <code class="language-plaintext highlighter-rouge">Pos X</code> and <code class="language-plaintext highlighter-rouge">Pos Y</code> to be 0</li> </ol> <p><img src="../imgs/02-DieRollerScene/08-SetPosXY.png" alt="Set PosXY" /></p> <p>Because the anchors are set to the bottom and center of the screen, this centers the button at that point.</p> <p>This isn’t quite what we want. You’ll notice that the bottom half of the button is now off the screen. This is because the <code class="language-plaintext highlighter-rouge">Pivot</code> of the <code class="language-plaintext highlighter-rouge">Button</code> is set to be the center point of the <code class="language-plaintext highlighter-rouge">Button</code>. We can adjust it to be the bottom of the button by changing the <code class="language-plaintext highlighter-rouge">Pivot</code>’s Y to 0.</p> <ol> <li>Set the Pivot to 0</li> <li>Update <code class="language-plaintext highlighter-rouge">Pos Y</code> to be 0</li> </ol> <p><img src="../imgs/02-DieRollerScene/09-SetPivot.png" alt="Set Pivot" /></p> <p>If all went well, your button is now at the bottom center of the screen. If you’d like to give it a little padding, you can set <code class="language-plaintext highlighter-rouge">Pos Y</code> to be slightly positive.</p> <h1 id="06-sizing-the-button"> <a href="#06-sizing-the-button" class="anchor-heading" aria-labelledby="06-sizing-the-button"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 06. Sizing the Button </h1> <p>By default, Unity sets a button to be <code class="language-plaintext highlighter-rouge">160</code> pixels wide and <code class="language-plaintext highlighter-rouge">30</code> pixels tall. Because we have set our canvas to have a size of <code class="language-plaintext highlighter-rouge">1920x1080</code> the button appears quite small on the screen. Let’s update the size!</p> <ol> <li>Set the buttons width to be 300</li> <li>Set the buttons height to be 200</li> </ol> <p><img src="../imgs/02-DieRollerScene/10-ChangeSize.png" alt="Change Size" /></p> <p>Because we have set the anchors and pivot to be the bottom center of the canvas, the button scales up and remains centered at the bottom of the screen.</p> <p>However, the text did not change size. This is because the <code class="language-plaintext highlighter-rouge">Text</code> is its own component in the scene that happens to be nested within the <code class="language-plaintext highlighter-rouge">Button</code>.</p> <ol> <li>Select the <code class="language-plaintext highlighter-rouge">Text</code> from the <code class="language-plaintext highlighter-rouge">Hierarchy</code></li> <li>Find the <code class="language-plaintext highlighter-rouge">TextMeshPro</code> component in the <code class="language-plaintext highlighter-rouge">Inspector</code> <ul> <li>You may have to scroll down to find it.</li> </ul> </li> <li>Change the Text from <code class="language-plaintext highlighter-rouge">Button</code> to <code class="language-plaintext highlighter-rouge">Roll Die!</code></li> <li>Change the <code class="language-plaintext highlighter-rouge">Font Size</code> to be <code class="language-plaintext highlighter-rouge">72</code>.</li> </ol> <p><img src="../imgs/02-DieRollerScene/11-UpdateButtonText.png" alt="Update Button Text" /></p> <p>If all went well, the text on your button is now legible!</p> <p><img src="../imgs/02-DieRollerScene/12-RollDieButton.png" alt="Roll Die Button" /></p> <h1 id="07-creating-a-diecontroller"> <a href="#07-creating-a-diecontroller" class="anchor-heading" aria-labelledby="07-creating-a-diecontroller"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 07. Creating a DieController </h1> <p>Next, we want to make the button do something! To do this, we will create a <code class="language-plaintext highlighter-rouge">MonoBehaviour</code> called <code class="language-plaintext highlighter-rouge">DieController</code>.</p> <ol> <li>Open the <code class="language-plaintext highlighter-rouge">Scripts/Controller</code> folder</li> <li>Right click</li> <li>Select <code class="language-plaintext highlighter-rouge">Create</code> &gt; <code class="language-plaintext highlighter-rouge">C# Script</code></li> <li>Name the script <code class="language-plaintext highlighter-rouge">DieController</code></li> <li>Double click to open the script</li> </ol> <p><img src="../imgs/02-DieRollerScene/13-CreateDieController.gif" alt="Create Die Controller" /></p> <p>We will use a <code class="language-plaintext highlighter-rouge">DieController</code> to… well… control a <code class="language-plaintext highlighter-rouge">Die</code>. More specifically a <code class="language-plaintext highlighter-rouge">DieController</code> defines how a <code class="language-plaintext highlighter-rouge">Die</code> interacts with a <code class="language-plaintext highlighter-rouge">Scene</code>.</p> <ol> <li>Update your <code class="language-plaintext highlighter-rouge">DieController</code> script:</li> </ol> <div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">AdventureQuest.Dice</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">DieController</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
    <span class="p">{</span>

        <span class="k">private</span> <span class="n">Die</span> <span class="n">_die</span><span class="p">;</span>

    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <ul> <li>Because the <code class="language-plaintext highlighter-rouge">DieController</code> is tightly coupled with the <code class="language-plaintext highlighter-rouge">Die</code> class, we will add it to the <code class="language-plaintext highlighter-rouge">AdventureQuest.Dice</code> name space.</li> <li>To be able to attach a <code class="language-plaintext highlighter-rouge">DieController</code> to our <code class="language-plaintext highlighter-rouge">Button</code>, it must be a <code class="language-plaintext highlighter-rouge">MonoBehaviour</code>.</li> <li>Additionally, because a <code class="language-plaintext highlighter-rouge">DieController</code> controls a <code class="language-plaintext highlighter-rouge">Die</code> we add a <code class="language-plaintext highlighter-rouge">Die</code> field.</li> </ul> <p><strong>Notice</strong>: we have specified that the <code class="language-plaintext highlighter-rouge">_die</code> field is <code class="language-plaintext highlighter-rouge">private</code>. This means that the <code class="language-plaintext highlighter-rouge">_die</code> variable will only ever be accessed within this file preventing us (or our dev-team) from accidentally writing a bug that modifies / uses it in some way. Additionally, the naming convention for <code class="language-plaintext highlighter-rouge">private</code> fields in C# is to prefix with an underscore (_) and use camelCase.</p> <ol> <li>Add a <code class="language-plaintext highlighter-rouge">Start()</code> method which initializes <code class="language-plaintext highlighter-rouge">_die</code> to be a 6 sided <code class="language-plaintext highlighter-rouge">Die</code>.</li> </ol> <div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">DieController</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>

    <span class="k">private</span> <span class="n">Die</span> <span class="n">_die</span><span class="p">;</span>
    
    <span class="k">void</span> <span class="nf">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">_die</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Die</span><span class="p">(</span><span class="m">6</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>The <code class="language-plaintext highlighter-rouge">Start()</code> method is a “magic” method that Unity looks for on <code class="language-plaintext highlighter-rouge">MonoBehaviour</code>s. If one exists, it will be called <strong>WHEN</strong> the <code class="language-plaintext highlighter-rouge">MonoBehaviour</code> enters the scene (when it “starts”). This acts similar to a constructor for <code class="language-plaintext highlighter-rouge">MonoBehaviour</code>s and gives us an opportunity to initialize it. In this case, we initialize the variable to be a new <code class="language-plaintext highlighter-rouge">Die</code> with 6 sides.</p> <ol> <li>Add a Roll method which rolls <code class="language-plaintext highlighter-rouge">Die</code> and reports the result using <code class="language-plaintext highlighter-rouge">Debug.Log</code></li> </ol> <div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">DieController</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="c1">// omitted for brevity</span>
    
    <span class="k">public</span> <span class="k">void</span> <span class="nf">Roll</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">_die</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Die</span><span class="p">(</span><span class="n">Sides</span><span class="p">);</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="s">$"Rolled a </span><span class="p">{</span><span class="n">_die</span><span class="p">.</span><span class="n">LastRolled</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>The above method calls the <code class="language-plaintext highlighter-rouge">Die.Roll</code> method which causes the state of the <code class="language-plaintext highlighter-rouge">Die</code> to change. Then, using <code class="language-plaintext highlighter-rouge">Debug.Log</code> displays the result of the roll in Unity’s console. All that is left to do is connect it to our button!</p> <h1 id="08-adding-a-dicecontroller-to-the-scene"> <a href="#08-adding-a-dicecontroller-to-the-scene" class="anchor-heading" aria-labelledby="08-adding-a-dicecontroller-to-the-scene"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 08. Adding a DiceController to the Scene </h1> <p>Let’s add a <code class="language-plaintext highlighter-rouge">DieController</code> to the scene.</p> <ol> <li>Right click in the <code class="language-plaintext highlighter-rouge">Hierarchy</code> panel</li> <li>Select <code class="language-plaintext highlighter-rouge">Create Empty</code></li> <li>Rename the Game Object <code class="language-plaintext highlighter-rouge">d6 Controller</code></li> </ol> <p><img src="../imgs/02-DieRollerScene/14-CreateD6.gif" alt="Create d6" /></p> <ol> <li>Select the <code class="language-plaintext highlighter-rouge">d6 Controller</code> in the <code class="language-plaintext highlighter-rouge">Hierarchy</code></li> <li>In the <code class="language-plaintext highlighter-rouge">Inspector</code> panel click <code class="language-plaintext highlighter-rouge">Add Component</code></li> <li>Search for <code class="language-plaintext highlighter-rouge">DieController</code></li> <li>Select <code class="language-plaintext highlighter-rouge">DieController</code></li> </ol> <p><img src="../imgs/02-DieRollerScene/15-AddComponent.gif" alt="Add Die Controller" /></p> <p>If all went well, a <code class="language-plaintext highlighter-rouge">Die Controller</code> component is now visible in the inspector.</p> <h1 id="09-rolling-on-button-click"> <a href="#09-rolling-on-button-click" class="anchor-heading" aria-labelledby="09-rolling-on-button-click"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 09. Rolling on Button Click </h1> <p>Next, we need to attach the <code class="language-plaintext highlighter-rouge">Roll</code> method to the <code class="language-plaintext highlighter-rouge">Button</code>’s <code class="language-plaintext highlighter-rouge">OnClick</code> event.</p> <ol> <li>Select the <code class="language-plaintext highlighter-rouge">Button</code> in the <code class="language-plaintext highlighter-rouge">Hierarchy</code></li> <li>In the <code class="language-plaintext highlighter-rouge">Inspector</code> panel, find the <code class="language-plaintext highlighter-rouge">Button</code> component (you may need to scroll down)</li> </ol> <p><img src="../imgs/02-DieRollerScene/16-FindButtonComponent.png" alt="Find Button Component" /></p> <p>At the bottom of the <code class="language-plaintext highlighter-rouge">Button</code> component, you will see a box labeled <code class="language-plaintext highlighter-rouge">OnClick()</code>. This is a <code class="language-plaintext highlighter-rouge">UnityEvent</code> that <code class="language-plaintext highlighter-rouge">GameObject</code>s can “listen” to and be notified when the button is clicked.</p> <ol> <li>Click the <code class="language-plaintext highlighter-rouge">+</code> icon on the <code class="language-plaintext highlighter-rouge">On Click ()</code> event to add a <strong>listener</strong></li> <li>Drag the <code class="language-plaintext highlighter-rouge">d6 Controller</code> from the <code class="language-plaintext highlighter-rouge">Hierarcy</code> into the box that says <code class="language-plaintext highlighter-rouge">None (Object)</code>.</li> </ol> <p><img src="../imgs/02-DieRollerScene/16-AddListener.gif" alt="Add Listener" /></p> <p>This registers the <code class="language-plaintext highlighter-rouge">d6 Controller</code> to listen for button clicks. All that is left to do is specify what it should do when the button is clicked.</p> <ol> <li>Click the drop down menu that is labeled <code class="language-plaintext highlighter-rouge">No Function</code></li> <li>Select <code class="language-plaintext highlighter-rouge">DieController</code> &gt; <code class="language-plaintext highlighter-rouge">Roll()</code></li> </ol> <p><img src="../imgs/02-DieRollerScene/18-SelectRoll.png" alt="Select Roll" /></p> <p>By doing this, we have specified that we would like the <code class="language-plaintext highlighter-rouge">Roll()</code> method to be invoked anytime the button is clicked.</p> <h2 class="no_toc" id="test-it-out"> <a href="#test-it-out" class="anchor-heading" aria-labelledby="test-it-out"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Test it out </h2> <p>Whew! That was a lot of work!</p> <ol> <li>Click the <code class="language-plaintext highlighter-rouge">Run</code> button to launch the scene</li> <li>Click the <code class="language-plaintext highlighter-rouge">Roll Die!</code> button</li> <li>Open the <code class="language-plaintext highlighter-rouge">Console</code> panel</li> </ol> <p>If all went well, you should see the output of the <code class="language-plaintext highlighter-rouge">Debug.Log</code> in your console.</p> <p><img src="../imgs/02-DieRollerScene/19-RunAndRoll.png" alt="Run and Roll" /></p> <h1 id="10-generalizing-the-diecontroller"> <a href="#10-generalizing-the-diecontroller" class="anchor-heading" aria-labelledby="10-generalizing-the-diecontroller"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 10. Generalizing the DieController </h1> <p>Alright! We are now able to roll a 6 sided die. But we want to do be able to roll dice of all shapes and sizes!</p> <p>To do this, we will add a <code class="language-plaintext highlighter-rouge">int Sides</code> property to our <code class="language-plaintext highlighter-rouge">DieController</code> that will specify how many sides the underlying die should be initialized with. Additionally, we will expose that property to the <code class="language-plaintext highlighter-rouge">Inspector</code> panel so we can set it in the editor.</p> <ol> <li>Update the <code class="language-plaintext highlighter-rouge">DieController</code> class to have a <code class="language-plaintext highlighter-rouge">Sides</code> property that has a <code class="language-plaintext highlighter-rouge">private set</code> and initialized to <code class="language-plaintext highlighter-rouge">6</code>. (Don’t forget to update your constructor)</li> </ol> <div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">DieController</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="kt">int</span> <span class="n">Sides</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">private</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="m">6</span><span class="p">;</span>
    <span class="k">private</span> <span class="n">Die</span> <span class="n">_die</span><span class="p">;</span>
    
    <span class="k">void</span> <span class="nf">Start</span><span class="p">()</span> 
    <span class="p">{</span>
        <span class="n">_die</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Die</span><span class="p">(</span><span class="n">Sides</span><span class="p">);</span> <span class="c1">// &lt;-- This line changed!</span>
    <span class="p">}</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">Roll</span><span class="p">()</span> <span class="p">{</span> <span class="c1">// omitted for brevity }</span>
<span class="p">}</span>
</code></pre></div></div> <p>Because <code class="language-plaintext highlighter-rouge">Sides</code> should never change, we use <code class="language-plaintext highlighter-rouge">private set</code> to ensure that no one changes it later. Unfortunately, this means that the <code class="language-plaintext highlighter-rouge">Inspector</code> cannot see it. However, there is a work around! Unity provides a <code class="language-plaintext highlighter-rouge">[field: SerializeField]</code> attribute which allows us to modify a <strong>field</strong> in the <code class="language-plaintext highlighter-rouge">Inspector</code> without exposing it as <code class="language-plaintext highlighter-rouge">public</code> to the rest of the program.</p> <ol> <li>Add the <code class="language-plaintext highlighter-rouge">[field: SerializeField]</code> attribute to the <code class="language-plaintext highlighter-rouge">Sides</code> property.</li> </ol> <div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">DieController</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>

    <span class="p">[</span><span class="n">field</span><span class="p">:</span> <span class="n">SerializeField</span><span class="p">]</span>
    <span class="k">public</span> <span class="kt">int</span> <span class="n">Sides</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">private</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="m">6</span><span class="p">;</span>
    
    <span class="c1">// omitted for brevity</span>
<span class="p">}</span>
</code></pre></div></div> <p>Now, if we view the <code class="language-plaintext highlighter-rouge">DieController</code> in the inspector, we can adjust the number of sides the <code class="language-plaintext highlighter-rouge">Die</code> will initialize with.</p> <ol> <li>Select the <code class="language-plaintext highlighter-rouge">d6 Controller</code> in the <code class="language-plaintext highlighter-rouge">Hierarchy</code> panel</li> <li>In the <code class="language-plaintext highlighter-rouge">Inspector</code> find the <code class="language-plaintext highlighter-rouge">Die Controller</code> component</li> <li>Update the <code class="language-plaintext highlighter-rouge">Sides</code> field to be 20</li> </ol> <p><img src="../imgs/02-DieRollerScene/20-UpdateDieController.png" alt="Update Die Controller" /></p> <h2 class="no_toc" id="test-it-out-1"> <a href="#test-it-out-1" class="anchor-heading" aria-labelledby="test-it-out-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Test it Out </h2> <ol> <li>Click the <code class="language-plaintext highlighter-rouge">Run</code> button to launch the scene</li> <li>Click the <code class="language-plaintext highlighter-rouge">Roll Die!</code> button</li> <li>Open the <code class="language-plaintext highlighter-rouge">Console</code> panel</li> </ol> <p>If all went well, you should now see a new set of numbers being rolled!</p> <p><strong>Note</strong>: You can set the Sides property to be invalid in the editor. However, because we added in an <code class="language-plaintext highlighter-rouge">ArgumentException</code> during construction, the console will report an error immediately when the game is launched. By failing fast, we are more likely to be able to identify this bug quickly</p> <h1 id="good-time-to-commit"> <a href="#good-time-to-commit" class="anchor-heading" aria-labelledby="good-time-to-commit"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Good Time to Commit </h1> <p>Now would be a good time to make a <code class="language-plaintext highlighter-rouge">git</code> commit. You just finished a feature. More specifically, you just implemented a simple <code class="language-plaintext highlighter-rouge">DieController</code>. Before committing, be sure you save your <code class="language-plaintext highlighter-rouge">Die Roller</code> scene (Unity doesn’t auto save for you).</p> <h1 id="challenge-create-a-set-of-dice"> <a href="#challenge-create-a-set-of-dice" class="anchor-heading" aria-labelledby="challenge-create-a-set-of-dice"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Challenge: Create a Set of Dice </h1> <p>Using everything you’ve done so far, can you create a set of Table Top Role Playing Game Dice? The set should include a d4, d6, d8, d10, d12, and d20.</p> <p>For organization purposes, you should create a parent GameObject for all of your dice buttons as well as all of your dice controllers.</p> <p>Read the Manual: Research the <a href="https://docs.unity.cn/2021.3/Documentation/Manual/script-HorizontalLayoutGroup.html">Horizontal Layout Group</a>. Can you utilize it to position your buttons evenly along the bottom of the screen?</p> <p>When you’re finished, your <code class="language-plaintext highlighter-rouge">Hierarchy</code> should match this one:</p> <p><img src="../imgs/02-DieRollerScene/22-Hierarchy-Organization.png" alt="Hierarchy Finished" /></p> <p>And your scene should look similar to this:</p> <p><img src="../imgs/02-DieRollerScene/21-FinishedChallenge.png" alt="Finished Challenge" /></p> <h1 id="whats-next"> <a href="#whats-next" class="anchor-heading" aria-labelledby="whats-next"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> What’s Next? </h1> <p>Once you’ve added in several dice buttons, it’s time to get the information displaying on the screen. To do this, we will learn how to create our own <code class="language-plaintext highlighter-rouge">UnityEvent</code>s. When you’re ready, proceed to <a href="/pages/01-CreatingADieRoller/03-AddingAnOnRollEvent.html">Chapter 3: Adding an OnRoll Event</a>.</p><hr /> <h2 id="discussion"> <a href="#discussion" class="anchor-heading" aria-labelledby="discussion"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Join the Discussion </h2> <p> If you're stuck, have questions, or want to provide feedback, you can do so below. However, I ask that you please refrain from posting complete solutions to any of the challenges. </p> <p> Before commenting, you will need to authorize <b>giscus</b>. Alternatively, you can add a comment directly on the <a href="https://github.com/CaptainCoderOrg/AdventureQuest-Unity-2021/discussions/categories/q-a" target="_blank">GitHub Discussion Board</a>. </p> <script src="https://giscus.app/client.js" data-repo="CaptainCoderOrg/AdventureQuest-Unity-2021" data-repo-id="R_kgDOIsdEkA" data-category="Q&A" data-category-id="DIC_kwDOIsdEkM4CTVa-" data-mapping="title" data-strict="0" data-reactions-enabled="0" data-emit-metadata="0" data-input-position="bottom" data-theme="preferred_color_scheme" data-lang="en" crossorigin="anonymous" async> </script> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
